# Https μ•”νΈν™” λ™μ‘ κ³Όμ •

![image](https://github.com/KimSeonHui/cs-study/assets/44824456/572373a7-9a28-4baf-9242-7de1ee184184)

### μ”μ•½
> - Httpsλ” `λ€μΉ­ν‚¤` + `λΉ„λ€μΉ­ν‚¤`λ¥Ό λ¨λ‘ μ‚¬μ©ν•λ” ν•μ΄λΈλ¦¬λ“ μ΅°ν•©
> - **Https μ•”νΈν™” λ™μ‘ κ³Όμ •**
>   1. ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)κ°€ μ„λ²„λ΅ μµμ΄ μ—°κ²°μ„ μ‹λ„
>   2. μ„λ²„λ” SSL μΈμ¦μ„λ¥Ό λΈλΌμ°μ €μ—κ² μ „λ‹¬
>   3. λΈλΌμ°μ €λ” CAλ¥Ό ν†µν•΄ μΈμ¦μ„ μ ν¨μ„±μ„ κ²€μ‚¬ν•κ³  μ„Έμ…ν‚¤ λ°κΈ‰
>   4. λΈλΌμ°μ €λ” μ„Έμ…ν‚¤λ¥Ό λ³΄κ΄€ν•λ©° μ„λ²„μ κ³µκ°ν‚¤λ΅ μ„Έμ…ν‚¤λ¥Ό μ•”νΈν™”ν•΄ μ„λ²„λ΅ μ „μ†΅
>   5. μ„λ²„λ” λΉ„λ°€ν‚¤λ΅ λΈλΌμ°μ €κ°€ μ „λ‹¬ν• μ•”νΈν™”λ μ„Έμ…ν‚¤λ¥Ό λ³µνΈν™”ν•΄ μ„Έμ…ν‚¤λ¥Ό μ–»μ
>   6. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ™μΌν• μ„Έμ…ν‚¤λ¥Ό κ³µμ ν•κΈ° λ•λ¬Έμ— λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•  λ• μ„Έμ…ν‚¤λ΅ μ•”νΈν™”/λ³µνΈν™”λ¥Ό μ§„ν–‰

<br /><br />



## Https λ™μ‘ λ°©μ‹

### 1. μΈμ¦μ„ λ°κΈ‰

![image](https://github.com/KimSeonHui/cs-study/assets/44824456/1739e12e-ed0c-46dd-bc88-7d8aa4eb630c)
###### `μ„λ²„ = μ‚¬μ΄νΈ`,  `ν΄λΌμ΄μ–ΈνΈ = μ‚¬μ©μ` 

1.  μ„λ²„λ” κ³µκ°ν‚¤, λΉ„λ°€ν‚¤λ¥Ό λ§λ“¤κ³ , μμ‹ μ μ •λ³΄μ™€ κ°μΈν‚¤λ¥Ό κ΄€λ¦¬λ¥Ό μ„ν•΄ μΈμ¦ κΈ°κ΄€(CA)μ™€ κ³„μ•½ν•λ‹¤.
2. μΈμ¦ κΈ°κ΄€μ€ μ„λ²„κ°€ μ μ¶λ λ°μ΄ν„°λ¥Ό κ²€μ¦ν•κ³ , μΈμ¦ κΈ°κ΄€μ κ°μΈν‚¤λ΅ μ‚¬μ΄νΈμ—μ„ μ μ¶ν• μ •λ³΄λ¥Ό μ•”νΈν™” ν•΄ μΈμ¦μ„λ¥Ό λ§λ“¤μ–΄ μ„λ²„μ— μ κ³µν•λ‹¤.
3. μΈμ¦ κΈ°κ΄€μ€ μ›Ή λΈλΌμ°μ €μ— μμ‹ μ κ³µκ°ν‚¤λ¥Ό μ κ³µν•λ‹¤.

| π“λΈλΌμ°μ €λ” λ‚΄λ¶€μ μΌλ΅ CA λ¦¬μ¤νΈμ™€ CAμ κ³µκ°ν‚¤λ¥Ό λ¨λ‘ μ•κ³  μλ‹¤!

<br />


### 2. SSL/TLS HandShaking

![image](https://github.com/KimSeonHui/cs-study/assets/44824456/2b0dc36f-9f97-4084-ae53-882787034fc2)


### 1) Client Hello
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ²μ μ ‘μ†μ„ ν•κ² λλ” μ‹μ 
- ν΄λΌμ΄μ–ΈνΈμ—μ„ `λλ¤ λ°μ΄ν„° μƒμ„±`ν•΄ μ„λ²„μ— μ „λ‹¬
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•  μ μλ” `μ•”νΈν™” λ°©μ‹`λ“¤μ„ μ„λ²„μ— μ „λ‹¬

<br />

### 2) Server Hello
- client helloμ— λ€ν• μ‘λ‹µ
- ν΄λΌμ΄μ–ΈνΈκ°€ μ „λ‹¬ν• `μ•”νΈν™” λ°©μ‹` μ¤‘μ—μ„ μ„λ²„ μ½μ—μ„ μ‚¬μ©ν•  μ μλ” λ°©μ‹μ„ μ„ νƒν•΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬
    - μ±„νƒλ μ•”νΈν™” λ°©μ‹μΌλ΅ ν†µμ‹  μ§„ν–‰
    - μ„λ²„μ—μ„ μ§€μ› ν•μ§€ μ•μΌλ©΄ handshake X
- `λλ¤ λ°μ΄ν„°` μƒμ„±ν•΄ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬
- λ°κΈ‰ λ°›μ€ `μΈμ¦μ„ `ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬
    - μ„λΉ„μ¤ μ •λ³΄(λ„λ©”μΈ, μΈμ¦μ„ λ°κΈ‰ν• CA)
    - μ„λ²„μ κ³µκ°ν‚¤

<br />

### 3) Verify Server Certificate
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ SSL μΈμ¦μ„λ¥Ό λΈλΌμ°μ €μ— μλ” CA κ³µκ°ν‚¤λ¥Ό ν†µν•΄ κ²€μ¦
- CAμ— μλ” κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ λ³µνΈν™”κ°€ λλ‹¤λ©΄ SSL μΈμ¦μ„κ°€ ν•΄λ‹Ή κ³µκ°ν‚¤ - λΉ„κ³µκ°ν‚¤ μ μ•”νΈν™”λ κ²ƒ
- **μ‹ λΆ°ν•  μ μλ” μ„λ²„!**

<br />


### 4) Client Key Exchange
- `"The premaster secret"`λΌλ” λλ¤ λ°μ΄ν„°λ¥Ό μƒμ„±
- λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ λ• μ‚¬μ©ν•κΈ° μ„ν• μ•”νΈν™” ν‚¤, `λ€μΉ­ν‚¤ λ°©μ‹`μΌλ΅ μ‚¬μ©λ¨
- λ…Έμ¶λλ©΄ μ•λκΈ° λ•λ¬Έμ— `μ„λ²„μ κ³µκ°ν‚¤`λ΅ `μ•”νΈν™”` ν•΄ μ„λ²„λ΅ μ „μ†΅

<br />

### 6) Verify Client Certificate
- ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ `"The premaster secret"` λ°μ΄ν„°λ¥Ό μ„λ²„μ λΉ„λ°€ν‚¤λ΅ λ³µνΈν™”

<br />

### 7) Client "finished"
- ν΄λΌμ΄μ–ΈνΈκ°€ ν΄λΌμ΄μ–ΈνΈ λλ¤ λ°μ΄ν„°, μ„λ²„ λλ¤ λ°μ΄ν„°, "The premaster secret"λ¥Ό μ΄μ©ν•΄ `μ„Έμ…ν‚¤` μƒμ„±

<br />

### 8) Server "finished"
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈ λλ¤ λ°μ΄ν„°, μ„λ²„ λλ¤ λ°μ΄ν„°, "The premaster secret"λ¥Ό μ΄μ©ν•΄ `μ„Έμ…ν‚¤` μƒμ„±

<br />

### 9) Exchange Message
- ν•Έλ“μ„Έμ΄ν¬ μ™„λ£
- `μ„Έμ…ν‚¤`λ¥Ό μ΄μ©ν•΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” λ°μ΄ν„°λ¥Ό `λ€μΉ­ν‚¤ λ°©μ‹`μΌλ΅ μ•”νΈν™” ν• ν›„ μ£Όκ³  λ°›μ


#### SSL ν†µμ‹ μ€ κ³µκ°ν‚¤ λ°©μ‹, λ€μΉ­ν‚¤ λ°©μ‹μ μ΅°ν•©

> #### κ³µκ°ν‚¤ λ°©μ‹
> μ»΄ν“¨ν„° μμ›μ„ λ§μ΄ μ‚¬μ© > λΉ„μ©β¬†οΈ     
λ€μΉ­ν‚¤λ¥Ό μ„λ΅ μ£Όκ³  λ°›μ•„μ•Ό ν•λ”λ° λ³΄μ•μƒ μ„ν—

**κ³µκ°ν‚¤ λ°©μ‹**
- μ†λ„λ” λλ¦¬μ§€λ§, λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² μ£Όκ³  λ°›μ„ μ μλ„λ΅
- μ„Έμ…ν‚¤λ¥Ό μ•μ „ν•κ² κ³µμ ν•λ” κ³Όμ •μ—μ„ μ‚¬μ©

**λ€μΉ­ν‚¤ λ°©μ‹**
- λ°μ΄ν„° κµν™μ—λ” λΉ λ¥Έ μ—°μ‚° μ†λ„κ°€ ν•„μ”ν•κΈ° λ•λ¬Έμ— 
- λ°μ΄ν„° μ „μ†΅μ—μ„ μ‚¬μ©

<br />

### μ„Έμ… μΆ…λ£
- λ°μ΄ν„° μ†΅μμ‹ μ΄ λλ‚λ©΄ SSL ν†µμ‹ μ΄ λλ‚¬λ‹¤λ” κ±Έ μ„λ΅μ—κ² μ•λ ¤μ¤
- ν†µμ‹ μ—μ„ μ‚¬μ©ν• μ„Έμ…ν‚¤(λ€μΉ­ν‚¤) νκΈ°

<br /><br />

## μ°Έκ³  μλ£
- [[Network] HTTPSμ λ™μ‘λ°©μ‹](https://inuplace.tistory.com/1086)
- [HTTPS (λ€μΉ­ν‚¤, κ³µκ°ν‚¤, CA)](https://dolphinsarah.tistory.com/52)
- [HTTPS λ™μ‘ μ›λ¦¬](https://dolphinsarah.tistory.com/53)
- [HTTPSλ€? (λ™μ‘λ°©μ‹, μ¥λ‹¨μ )](https://rachel-kwak.github.io/2021/03/08/HTTPS.html)